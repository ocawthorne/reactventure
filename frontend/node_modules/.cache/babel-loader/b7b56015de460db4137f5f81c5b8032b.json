{"ast":null,"code":"export const save = (user, hist = [], inventory = [], knownObjects = ['crowbar', 'door', 'desk', 'drawer', 'paper', 'candle', 'chest'], brokenObjects = []) => {\n  console.log('Save action initiated.');\n  return dispatch => {\n    fetch(`http://localhost:3000/api/v1/users/${user.id}`, {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      credentials: 'include',\n      body: JSON.stringify({\n        history: hist,\n        inventory: inventory,\n        known_objects: knownObjects,\n        broken_objects: brokenObjects\n      })\n    }).then(res => res.json()).then(data => {\n      dispatch({\n        type: \"USER_HISTORY_FETCH_SUCCESS\",\n        payload: {\n          userHistory: hist,\n          userObjects: inventory,\n          knownObjects,\n          brokenObjects\n        }\n      });\n    }).then(data => retrieve(data));\n  };\n};\nexport const retrieve = user => {\n  console.log('Retrieve initiated.');\n  return dispatch => {\n    fetch(`http://localhost:3000/api/v1/users/${user.id}`, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": true\n      },\n      credentials: 'include'\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n      dispatch({\n        type: \"USER_HISTORY_FETCH_SUCCESS\",\n        payload: {\n          userHistory: data.history,\n          userObjects: data.inventory,\n          knownObjects: data.known_objects,\n          brokenObjects: data.broken_objects\n        }\n      });\n    });\n  };\n};","map":{"version":3,"sources":["/home/loots/code/5-phase/reactventure/frontend/src/actions/hist.js"],"names":["save","user","hist","inventory","knownObjects","brokenObjects","console","log","dispatch","fetch","id","method","headers","credentials","body","JSON","stringify","history","known_objects","broken_objects","then","res","json","data","type","payload","userHistory","userObjects","retrieve"],"mappings":"AAAA,OAAO,MAAMA,IAAI,GAAG,CAACC,IAAD,EAAOC,IAAI,GAAC,EAAZ,EAAgBC,SAAS,GAAC,EAA1B,EAA8BC,YAAY,GAAC,CAAC,SAAD,EAAW,MAAX,EAAkB,MAAlB,EAAyB,QAAzB,EAAkC,OAAlC,EAA0C,QAA1C,EAAmD,OAAnD,CAA3C,EAAwGC,aAAa,GAAC,EAAtH,KAA6H;AAC9IC,EAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA,SAAOC,QAAQ,IAAI;AAChBC,IAAAA,KAAK,CAAE,sCAAqCR,IAAI,CAACS,EAAG,EAA/C,EAAkD;AACpDC,MAAAA,MAAM,EAAE,MAD4C;AAEpDC,MAAAA,OAAO,EAAE;AACN,wBAAgB;AADV,OAF2C;AAKpDC,MAAAA,WAAW,EAAE,SALuC;AAMpDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAClBC,QAAAA,OAAO,EAAEf,IADS;AAElBC,QAAAA,SAAS,EAAEA,SAFO;AAGlBe,QAAAA,aAAa,EAAEd,YAHG;AAIlBe,QAAAA,cAAc,EAAEd;AAJE,OAAf;AAN8C,KAAlD,CAAL,CAaCe,IAbD,CAaMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAbb,EAcCF,IAdD,CAcMG,IAAI,IAAI;AAEXf,MAAAA,QAAQ,CAAC;AACNgB,QAAAA,IAAI,EAAE,4BADA;AAENC,QAAAA,OAAO,EAAE;AACNC,UAAAA,WAAW,EAAExB,IADP;AAENyB,UAAAA,WAAW,EAAExB,SAFP;AAGNC,UAAAA,YAHM;AAINC,UAAAA;AAJM;AAFH,OAAD,CAAR;AASF,KAzBD,EA0BCe,IA1BD,CA0BMG,IAAI,IAAIK,QAAQ,CAACL,IAAD,CA1BtB;AA2BF,GA5BD;AA6BF,CA/BM;AAiCP,OAAO,MAAMK,QAAQ,GAAI3B,IAAD,IAAU;AAC/BK,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACA,SAAOC,QAAQ,IAAI;AAChBC,IAAAA,KAAK,CAAE,sCAAqCR,IAAI,CAACS,EAAG,EAA/C,EAAkD;AACpDC,MAAAA,MAAM,EAAE,KAD4C;AAEpDC,MAAAA,OAAO,EAAE;AACN,wBAAgB,kBADV;AAEN,uCAA+B;AAFzB,OAF2C;AAMpDC,MAAAA,WAAW,EAAE;AANuC,KAAlD,CAAL,CAQCO,IARD,CAQMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARb,EASCF,IATD,CASMG,IAAI,IAAI;AACXjB,MAAAA,OAAO,CAACC,GAAR,CAAYgB,IAAZ;AACAf,MAAAA,QAAQ,CAAC;AACNgB,QAAAA,IAAI,EAAE,4BADA;AAENC,QAAAA,OAAO,EAAE;AACNC,UAAAA,WAAW,EAAEH,IAAI,CAACN,OADZ;AAENU,UAAAA,WAAW,EAAEJ,IAAI,CAACpB,SAFZ;AAGNC,UAAAA,YAAY,EAAEmB,IAAI,CAACL,aAHb;AAINb,UAAAA,aAAa,EAAEkB,IAAI,CAACJ;AAJd;AAFH,OAAD,CAAR;AASF,KApBD;AAqBF,GAtBD;AAuBF,CAzBM","sourcesContent":["export const save = (user, hist=[], inventory=[], knownObjects=['crowbar','door','desk','drawer','paper','candle','chest'], brokenObjects=[]) => {\n   console.log('Save action initiated.')\n   return dispatch => {\n      fetch(`http://localhost:3000/api/v1/users/${user.id}`, {\n         method: 'POST',\n         headers: {\n            \"Content-Type\": \"application/json\",\n         },\n         credentials: 'include',\n         body: JSON.stringify({\n            history: hist,\n            inventory: inventory,\n            known_objects: knownObjects,\n            broken_objects: brokenObjects\n         })\n      })\n      .then(res => res.json())\n      .then(data => {\n         \n         dispatch({\n            type: \"USER_HISTORY_FETCH_SUCCESS\",\n            payload: {\n               userHistory: hist,\n               userObjects: inventory,\n               knownObjects,\n               brokenObjects\n            }\n         })\n      })\n      .then(data => retrieve(data))\n   }\n}\n\nexport const retrieve = (user) => {\n   console.log('Retrieve initiated.')\n   return dispatch => {\n      fetch(`http://localhost:3000/api/v1/users/${user.id}`, {\n         method: 'GET',\n         headers: {\n            \"Content-Type\": \"application/json\",\n            \"Access-Control-Allow-Origin\": true\n         },\n         credentials: 'include'\n      })\n      .then(res => res.json())\n      .then(data => {\n         console.log(data)\n         dispatch({\n            type: \"USER_HISTORY_FETCH_SUCCESS\",\n            payload: {\n               userHistory: data.history,\n               userObjects: data.inventory,\n               knownObjects: data.known_objects,\n               brokenObjects: data.broken_objects\n            }\n         })\n      })\n   }\n}\n"]},"metadata":{},"sourceType":"module"}